(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{495:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[id]",function(){return c(831)}])},7005:function(a,b){"use strict";b.Z={src:"/_next/static/media/avatar.2102f507.png",height:858,width:938,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAlklEQVR42iWOTQrCQAyF53auxGO4cO/KhRfQE7jrSsF7CKJgoSDo0spMKxRFms5Pkj4YCEm+LxCeERFVZWYRzgs6pMFIKfkQXNvWde29B0IaHAGNtcvFfDKdOeeAkEaY+xA/1bUr1q/dqrmXFCIkXklPA/06PRV63tP/C8yv0OOllOP2fdjYWyVASJNTDSSPp6KIJKcaAf7Tmk0xyk0rAAAAAElFTkSuQmCC"}},6467:function(a,b,c){"use strict";c.d(b,{Z:function(){return K}});var d=c(7568),e=c(1799),f=c(603),g=c(7297),h=c(4051),i=c.n(h),j=c(5893);c(7294);var k=c(9521),l=c(65);c(3999);var m=c(3349),n=c(6677),o=c(6170),p=c(5321),q=c(5675),r=c.n(q),s=c(7005),t=c(4937),u=c(1163);function v(){var a=(0,g.Z)(["\ndisplay: flex;\nalign-items: center;\ncursor: pointer;\npadding: 15px;  \nword-break: break-word;\noverflow-y: auto;\nscrollbar-width: none;\n\n:hover{\n    background-color: #e9eaeb;\n}\n"]);return v=function(){return a},a}function w(){var a=(0,g.Z)(["\ncursor: pointer;\nheight: 40px;\nwidth: 40px;\nborder-radius: 50%;\nmargin: 5px;\n\n"]);return w=function(){return a},a}function x(){var a=(0,g.Z)(["\nmargin-left: 15px;\n"]);return x=function(){return a},a}var y=function(a){var b,c,d=a.id,e=a.users,g=(0,u.useRouter)(),h=(0,f.Z)((0,m.F_)(o.I),1)[0],i=(0,p.IO)((0,p.hJ)(o.db,"users"),(0,p.ar)("email","==",(0,t.Z)(e,h))),k=(0,f.Z)((0,n.Kx)(i),1)[0],l=null==k?void 0:null===(b=k.docs)|| void 0===b?void 0:null===(c=b[0])|| void 0===c?void 0:c.data(),q=(0,t.Z)(e,h),v=function(){g.push("/chat/".concat(d))};return(0,j.jsxs)(z,{onClick:function(){return v()},children:[(null==l?void 0:l.photoURL)?(0,j.jsx)(A,{src:null==l?void 0:l.photoURL,alt:""}):(0,j.jsx)(r(),{src:s.Z,width:50,height:50,alt:"",style:C}),(0,j.jsx)(B,{children:q})]})},z=k.ZP.div(v()),A=k.ZP.img(w()),B=k.ZP.p(x()),C={cursor:"pointer",borderRadius:"50%",margin:"5px 15px"};function D(){var a=(0,g.Z)(["\nflex:0.45;\nborder-right: 1px solid whitesmoke;\nheight: 100vh;\nmin-width: 200px;\nmax-width: 350px;\noverflow-y: scroll;\n\n::-webkit-scrollbar {\n    display: none;\n}\n-ms-overflow-style: none;\nscrollbar-width: none;\n\n"]);return D=function(){return a},a}function E(){var a=(0,g.Z)(["\ndisplay: flex;\nflex-wrap: wrap;\npadding: 0px 20px;\nflex-direction: column;\nbackground-color: whitesmoke;\nz-index: 1;\n"]);return E=function(){return a},a}function F(){var a=(0,g.Z)(["\ndisplay: flex;\nmargin-top: 0;\nposition: sticky;\ntop: 0;\nbackground-color: whitesmoke;\nz-index: 1;\nalign-items: center;\npadding-top:5px;\nheight: 80px;\n\n"]);return F=function(){return a},a}function G(){var a=(0,g.Z)(["\ncursor: pointer;\nheight: 40px;\nwidth: 40px;\nborder-radius: 50%;\n\n:hover{\n    opacity: 0.8;\n}\n"]);return G=function(){return a},a}function H(){var a=(0,g.Z)(["\ntext-align: left;\nmargin-left: 15px;\nword-break: break-word;\n"]);return H=function(){return a},a}function I(){var a=(0,g.Z)(["\nmargin-left:30px;\nmargin-top: 15px;\ncolor: blue;\nfont-size: 24px;\n"]);return I=function(){return a},a}function J(){var a=(0,g.Z)(["\nwidth: 100%;\nmargin-top: 10px;\nborder: 1px solid whitesmoke;\nborder-radius: 10px;\nfont-size:16px;\npadding: 8px;\npadding-left: 10px;\nbackground-color: white;\nmargin-bottom: 15px;\n\n&&& {    \n    color: black;\n    font-weight: 500;\n    text-align: left;\n    \n}\n\n"]);return J=function(){return a},a}function K(){var a,b=(0,f.Z)((0,m.F_)(o.I),1)[0],g=(0,p.hJ)(o.db,"chats"),h=(0,p.IO)(g,(0,p.ar)("users","array-contains",null==b?void 0:b.email)),k=(0,f.Z)((0,n.Kx)(h),1),q=k[0],r=null==q?void 0:q.docs.map(function(a){return(0,e.Z)({id:a.id},a.data())}),s=function(a){return null==r?void 0:r.find(function(c){return c.users.includes(b.email)&&c.users.includes(a)})},t=(a=(0,d.Z)(i().mark(function a(){var d,e;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=prompt("Please enter an email address for the user you wish to chat with")){a.next=3;break}return a.abrupt("return",null);case 3:if(!((e=c(3999)).validate(d)&&d!==(null==b?void 0:b.email)&&!s(d))){a.next=7;break}return a.next=7,(0,p.ET)((0,p.hJ)(o.db,"chats"),{users:[b.email,d]});case 7:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)}),v=(0,u.useRouter)(),w=function(){(0,l.w7)(o.I),v.push("/")};return(0,j.jsxs)(L,{children:[(0,j.jsxs)(M,{children:[(0,j.jsxs)(N,{children:[(0,j.jsx)(O,{src:b.photoURL,onClick:w}),(0,j.jsx)(P,{children:b.displayName})]}),(0,j.jsx)(R,{onClick:function(){return t()},children:"Search or start a new chat"})]}),(0,j.jsx)(Q,{children:"Chats"}),null==q?void 0:q.docs.map(function(a){return(0,j.jsx)(y,{id:a.id,users:a.data().users},a.id)})]})}var L=k.ZP.div(D()),M=k.ZP.div(E()),N=k.ZP.div(F()),O=k.ZP.img(G()),P=k.ZP.h3(H()),Q=k.ZP.div(I()),R=k.ZP.button(J())},831:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return ah}});var d=c(603),e=c(7297),f=c(5893),g=c(9008),h=c.n(g),i=c(7294),j=c(9521),k=c(6467),l=c(7568),m=c(1799),n=c(4051),o=c.n(n),p=c(7005),q=c(6170),r=c(3349),s=c(1163),t=c(381),u=c.n(t);function v(){var a=(0,e.Z)([""]);return v=function(){return a},a}function w(){var a=(0,e.Z)(["\nwidth: fit-content;\npadding: 10px;\nborder-radius: 18px;\nmargin: 20px 10px 0px 10px;\nmin-width: 60px;\npadding-bottom: 10px;\nposition: relative;\ntext-align: right;\n"]);return w=function(){return a},a}function x(){var a=(0,e.Z)(["\nmargin-left:auto;\nbackground-color: lightgrey;\n"]);return x=function(){return a},a}function y(){var a=(0,e.Z)(["\nbackground-color: rgb(60,65, 83);\nopacity: 0.8;\ncolor: white;\ntext-align: left;\n"]);return y=function(){return a},a}function z(){var a=(0,e.Z)(["\nwidth: fit-content;\ncolor: gray;\npadding: 10px;\nfont-size: 10px;\nmargin: 0px 0px 10px 0px;\nposition: relative;\ntext-align: right;\nz-index: 50;\n"]);return z=function(){return a},a}function A(){var a=(0,e.Z)(["\nmargin-left: auto;\n\n"]);return A=function(){return a},a}function B(){var a=(0,e.Z)(["\ntext-align: left;\n"]);return B=function(){return a},a}var C=function(a){var b=a.user,c=a.msg,e=(0,d.Z)((0,r.F_)(q.I),1)[0],g=b===e.email?F:G,h=b===e.email?I:J;return(0,f.jsxs)(D,{children:[(0,f.jsx)(g,{children:c.message}),(0,f.jsx)(h,{children:c.timestamp?u()(c.timestamp).format("M/D/YYYY LT"):"..."})]})},D=j.ZP.div(v()),E=j.ZP.p(w()),F=(0,j.ZP)(E)(x()),G=(0,j.ZP)(E)(y()),H=j.ZP.p(z()),I=(0,j.ZP)(H)(A()),J=(0,j.ZP)(H)(B()),K=c(5675),L=c.n(K),M=c(5321),N=c(4937),O=c(6677);function P(){var a=(0,e.Z)([""]);return P=function(){return a},a}function Q(){var a=(0,e.Z)(["\nposition: sticky;\nbackground-color: #F5F5F5;\nz-index: 100;\ntop: 0;\ndisplay: flex;\npadding: 11px;\nheight: 80px;\nalign-items: center;\nborder-bottom: 1px solid whitesmoke;\n\n"]);return Q=function(){return a},a}function R(){var a=(0,e.Z)(["\ncursor: pointer;\nheight: 40px;\nwidth: 40px;\nborder-radius: 50%;\n"]);return R=function(){return a},a}function S(){var a=(0,e.Z)(["\nmargin-left: 10px;\n"]);return S=function(){return a},a}function T(){var a=(0,e.Z)(["\npadding: 30px;\nbackground-color: #FAFAFA;\nmin-height: 90vh;\n"]);return T=function(){return a},a}function U(){var a=(0,e.Z)([""]);return U=function(){return a},a}function V(){var a=(0,e.Z)(["\ndisplay: flex;\nalign-items: center;\npadding: 10px;\nposition: sticky;\nbottom: 0;\nborder: 0;\nbackground-color: white;\nz-index: 100;\n"]);return V=function(){return a},a}function W(){var a=(0,e.Z)(["\nflex:1;\noutline: 0;\nborder: none;\nborder-radius: 10px;\nbackground-color: white;\npadding: 20px;\nmargin-left: 15px;\nmargin-right: 15px;\n"]);return W=function(){return a},a}var X=function(a){var b,c,e=(0,d.Z)((0,r.F_)(q.I),1)[0],g=(0,i.useRef)(null),h=(0,i.useState)(""),j=h[0],k=h[1],n=(0,s.useRouter)().query.id,t=(0,N.Z)(null===(b=a.chat)|| void 0===b?void 0:b.users,e),u=(0,d.Z)((0,O.d4)((0,M.hJ)(q.db,"users")),1)[0],v=null==u?void 0:u.filter(function(a){return a.email===t})[0],w=(c=(0,l.Z)(o().mark(function a(b){var c;return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),c=(0,M.JU)(q.db,"users",e.uid),(0,M.pl)(c,{lastSeen:(0,M.Bt)()},{merge:!0}),a.next=5,(0,M.ET)((0,M.hJ)(q.db,"chats/".concat(n,"/messages")),{userName:e.displayName,message:j,user:e.email,timestamp:(0,M.Bt)(),photoURL:e.photoURL});case 5:k(""),x();case 7:case"end":return a.stop()}},a)})),function(a){return c.apply(this,arguments)}),x=function(){g.current.scrollIntoView({behavior:"smooth",block:"start"})};return(0,f.jsxs)(Y,{children:[(0,f.jsxs)(Z,{children:[v&&(null==v?void 0:v.photoURL)?(0,f.jsx)($,{src:null==v?void 0:v.photoURL,alt:""}):(0,f.jsx)(L(),{src:p.Z,width:50,height:50,alt:"",style:_}),(null==v?void 0:v.userName)?(0,f.jsxs)(aa,{children:[" ",null==v?void 0:v.userName," "]}):(0,f.jsxs)(aa,{children:[" ",t," "]})]}),(0,f.jsxs)(ab,{children:[function(){if(a.messages){var b;return null===(b=a.messages)|| void 0===b?void 0:b.map(function(a){var b,c,d;return(0,f.jsx)(C,{user:a.user,msg:(c=(0,m.Z)({},a),d={timestamp:null===(b=a.timestamp)|| void 0===b?void 0:b.toDate().getTime()},d=null!=d?d:{},Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(d)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(d,a))}),c)},Math.random())})}}(),(0,f.jsx)(ac,{ref:g})]}),(0,f.jsxs)(ad,{children:[(0,f.jsx)(ae,{placeholder:"Type something nice...",value:j,onChange:function(a){return k(a.target.value)}}),(0,f.jsx)("button",{hidden:!0,disabled:!j,type:"submit",onClick:w,children:"Send message"})]})]})},Y=j.ZP.div(P()),Z=j.ZP.div(Q()),$=j.ZP.img(R()),_={cursor:"pointer",borderRadius:"50%",margin:"5px 15px"},aa=j.ZP.h3(S()),ab=j.ZP.div(T()),ac=j.ZP.div(U()),ad=j.ZP.form(V()),ae=j.ZP.input(W());function af(){var a=(0,e.Z)(["\n  display: flex;\n"]);return af=function(){return a},a}function ag(){var a=(0,e.Z)(["\nflex:1;\noverflow: scroll;\nheight: 100vh;\n\n::-webkit-scrollbar {\n    display: none;\n}\n-ms-overflow-style: none ;\nscrollbar-width: none;\n"]);return ag=function(){return a},a}var ah=function(){var a=(0,d.Z)((0,r.F_)(q.I),1)[0],b=(0,s.useRouter)().query.id,c=(0,M.hJ)(q.db,"chats/".concat(b,"/messages")),e=(0,M.IO)(c,(0,M.Xo)("timestamp","asc")),g=(0,d.Z)((0,O.d4)(e),1),i=g[0],j=(0,d.Z)((0,O.Xi)((0,M.JU)(q.db,"chats",b)),1),l=j[0];return(0,f.jsxs)(ai,{children:[(0,f.jsx)(h(),{children:(0,f.jsxs)("title",{children:["Chat with ",(0,N.Z)(null==l?void 0:l.users,a)]})}),(0,f.jsx)(k.Z,{}),(0,f.jsx)(aj,{children:(0,f.jsx)(X,{chat:l,messages:i})})]})},ai=j.ZP.div(af()),aj=j.ZP.div(ag())},4937:function(a,b){"use strict";var c=function(a,b){return null==a?void 0:a.filter(function(a){return a!==(null==b?void 0:b.email)})[0]};b.Z=c}},function(a){a.O(0,[885,697,774,888,179],function(){var b;return a(a.s=495)}),_N_E=a.O()}])