(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(3678)}])},2761:function(a,b,c){"use strict";c.d(b,{Z:function(){return H}});var d={};c.r(d);var e=c(7568),f=c(1799),g=c(603),h=c(7297),i=c(4051),j=c.n(i),k=c(5893);c(7294);var l=c(9521),m=c(1197),n=c(65);c(3999);var o=c(3349),p=c(6677),q=c(6170),r=c(5321),s=c(7265),t=c(4937),u=c(1163);function v(){var a=(0,h.Z)(["\ndisplay: flex;\nalign-items: center;\ncursor: pointer;\npadding: 15px;  \nword-break: break-word;\noverflow-y: auto;\nscrollbar-width: none;\n\n:hover{\n    background-color: #e9eaeb;\n}\n"]);return v=function(){return a},a}function w(){var a=(0,h.Z)(["\ncursor: pointer;\nheight: 40px;\nwidth: 40px;\nborder-radius: 50%;\nmargin: 5px;\nmargin-right: 15px;\n"]);return w=function(){return a},a}var x=function(a){var b,c,d=a.id,e=a.users,f=(0,u.useRouter)(),h=(0,g.Z)((0,o.F_)(q.I),1)[0],i=(0,r.IO)((0,r.hJ)(q.db,"users"),(0,r.ar)("email","==",(0,t.Z)(e,h))),j=(0,g.Z)((0,p.Kx)(i),1)[0],l=null==j?void 0:null===(b=j.docs)|| void 0===b?void 0:null===(c=b[0])|| void 0===c?void 0:c.data(),m=(0,t.Z)(e,h),n=function(){f.push("/chat/".concat(d))};return(0,k.jsxs)(y,{onClick:function(){return n()},children:[l?(0,k.jsx)(z,{src:null==l?void 0:l.photoURL}):(0,k.jsx)(z,{children:m[0]}),(0,k.jsx)("p",{children:m})]})},y=l.ZP.div(v()),z=(0,l.ZP)(s.Z)(w());function A(){var a=(0,h.Z)(["\nflex:0.45;\nborder-right: 1px solid whitesmoke;\nheight: 100vh;\nmin-width: 200px;\nmax-width: 350px;\noverflow-y: scroll;\n\n::-webkit-scrollbar {\n    display: none;\n}\n-ms-overflow-style: none;\nscrollbar-width: none;\n\n"]);return A=function(){return a},a}function B(){var a=(0,h.Z)(["\ndisplay: flex;\nflex-wrap: wrap;\npadding: 0px 20px;\nflex-direction: column;\nbackground-color: whitesmoke;\nz-index: 1;\n"]);return B=function(){return a},a}function C(){var a=(0,h.Z)(["\ndisplay: flex;\nmargin-top: 0;\nposition: sticky;\ntop: 0;\nbackground-color: whitesmoke;\nz-index: 1;\njustify-content: space-between;\nalign-items: center;\npadding-top:5px;\nheight: 80px;\n\n"]);return C=function(){return a},a}function D(){var a=(0,h.Z)(["\ncursor: pointer;\nheight: 40px;\nwidth: 40px;\nborder-radius: 50%;\n\n:hover{\n    opacity: 0.8;\n}\n"]);return D=function(){return a},a}function E(){var a=(0,h.Z)(["\ntext-align: left;\nword-break: break-word;\n"]);return E=function(){return a},a}function F(){var a=(0,h.Z)(["\nmargin-left:30px;\nmargin-top: 15px;\ncolor: blue;\nfont-size: 24px;\n"]);return F=function(){return a},a}function G(){var a=(0,h.Z)(["\nwidth: 100%;\nmargin-top: 10px;\nborder: 1px solid whitesmoke;\nborder-radius: 10px;\nfont-size:16px;\npadding: 8px;\npadding-left: 10px;\nbackground-color: white;\nmargin-bottom: 15px;\n\n&&& {    \n    color: black;\n    font-weight: 500;\n    text-align: left;\n    \n}\n\n"]);return G=function(){return a},a}function H(){var a,b=(0,g.Z)((0,o.F_)(q.I),1)[0],h=(0,r.hJ)(q.db,"chats"),i=(0,r.IO)(h,(0,r.ar)("users","array-contains",null==b?void 0:b.email)),l=(0,g.Z)((0,p.Kx)(i),1),s=l[0],t=null==s?void 0:s.docs.map(function(a){return(0,f.Z)({id:a.id},a.data())}),v=function(a){return null==t?void 0:t.find(function(c){return c.users.includes(b.email)&&c.users.includes(a)})},w=(a=(0,e.Z)(j().mark(function a(){var d,e;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=prompt("Please enter an email address for the user you wish to chat with")){a.next=3;break}return a.abrupt("return",null);case 3:if(!((e=c(3999)).validate(d)&&d!==(null==b?void 0:b.email)&&!v(d))){a.next=7;break}return a.next=7,(0,r.ET)((0,r.hJ)(q.db,"chats"),{users:[b.email,d]});case 7:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)}),y=(0,u.useRouter)(),z=function(){(0,n.w7)(q.I),y.push("/")};return(0,k.jsxs)(I,{children:[(0,k.jsxs)(J,{children:[(0,k.jsxs)(K,{children:[(0,k.jsx)(L,{src:b.photoURL||d.logo,onClick:z}),(0,k.jsx)(M,{children:b.displayName}),(0,k.jsx)(m.Z,{onClick:z})]}),(0,k.jsx)(O,{onClick:function(){return w()},children:"Search or start a new chat"})]}),(0,k.jsx)(N,{children:"Chats"}),null==s?void 0:s.docs.map(function(a){return(0,k.jsx)(x,{id:a.id,users:a.data().users},a.id)})]})}var I=l.ZP.div(A()),J=l.ZP.div(B()),K=l.ZP.div(C()),L=l.ZP.img(D()),M=l.ZP.h3(E()),N=l.ZP.div(F()),O=l.ZP.button(G())},3678:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return h}});var d=c(5893),e=c(9008),f=c.n(e),g=c(2761);function h(){return(0,d.jsxs)("div",{children:[(0,d.jsxs)(f(),{children:[(0,d.jsx)("title",{children:"Messenger"}),(0,d.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsx)(g.Z,{})]})}},4937:function(a,b){"use strict";var c=function(a,b){return null==a?void 0:a.filter(function(a){return a!==(null==b?void 0:b.email)})[0]};b.Z=c}},function(a){a.O(0,[60,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])